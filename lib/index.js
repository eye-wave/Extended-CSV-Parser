function y(e,s=[]){e=e.replace(/#.*\n?/g,"").trim();let[o]=e.match(/.*/)||[];if(!o)throw new Error("File empty");let n=h(o);return e.split(`
`).slice(1).map(t=>m(t,n,s))}function u(e,s,o=[]){if(s.endsWith("[]")){let r=s.slice(0,-2);return e.split(";").map(t=>u(t,r)).filter(t=>typeof t=="string"&&t.length<1?!1:typeof t=="number"&&t===0||typeof t=="boolean"&&t===!1?!0:!!t)}let n=e.startsWith("0x")?parseInt(e):parseFloat(e);switch(s){case"float":case"number":return isNaN(n)?null:n;case"int":return isNaN(n)?null:Math.floor(n);case"bool":case"boolean":{let r=e.toLowerCase();return r==="true"?!0:r==="false"?!1:null}}for(let r of o)if(s===r.name)return r.parse(e);return e}function m(e,s,o=[]){let n={};return e.split(",").forEach((r,t)=>{let i=s.at(t);if(!i)return;let p=i.tokens.slice(0,-1),f=i.tokens.at(-1),l=u(r,i.type,o);if(l===null||!f)return;let a=n;p.forEach(c=>{c in a||(a[c]={}),a=a[c]}),a[f]=l}),n}function h(e){return e.split(",").map(s=>{let[o,n="string"]=s.split(":"),r=(o==null?void 0:o.split("."))||[];return{type:n,tokens:r}})}export{y as parseCSV};
//# sourceMappingURL=index.js.map
